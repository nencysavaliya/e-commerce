{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Products - IndiVibe Seller</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>
    <div class="dashboard">
        <aside class="sidebar">
            <div class="sidebar-brand">
                <h2><i class="fas fa-bolt"></i> <span class="gradient-text">IndiVibe</span></h2>
            </div>
            <ul class="sidebar-nav">
                <li><a href="{% url 'dashboard:seller_dashboard' %}"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="{% url 'dashboard:seller_products' %}" class="active"><i class="fas fa-box"></i> My
                        Products</a></li>
                <li><a href="{% url 'dashboard:seller_add_product' %}"><i class="fas fa-plus"></i> Add Product</a></li>
                <li><a href="{% url 'dashboard:seller_orders' %}"><i class="fas fa-shopping-bag"></i> Orders</a></li>
                <li><a href="{% url 'home' %}"><i class="fas fa-store"></i> View Store</a></li>
            </ul>
        </aside>

        <main class="dashboard-content">
            <div class="dashboard-header">
                <h1><i class="fas fa-box"></i> My Products</h1>
                <a href="{% url 'dashboard:seller_add_product' %}" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Add New
                </a>
            </div>

            {% if messages %}
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
            {% endif %}

            {% if products %}
            <div class="grid grid-3">
                {% for product in products %}
                <div class="card">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="card-img">
                    {% endif %}
                    <div class="card-body">
                        <h4 class="card-title">{{ product.name|truncatechars:25 }}</h4>
                        <div class="d-flex justify-between align-center">
                            <span class="price-current">â‚¹{{ product.display_price }}</span>
                            <span class="badge badge-{% if product.is_active %}success{% else %}danger{% endif %}">
                                {% if product.is_active %}Active{% else %}Inactive{% endif %}
                            </span>
                        </div>
                        <p class="text-muted mt-2">Stock: {{ product.stock }}</p>
                        <div class="d-flex gap-1 mt-2">
                            <a href="{% url 'dashboard:seller_edit_product' product.id %}"
                                class="btn btn-secondary btn-sm">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{% url 'dashboard:seller_delete_product' product.id %}"
                                class="btn btn-danger btn-sm" onclick="return confirm('Delete this product?')">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="card text-center" style="padding: 4rem;">
                <i class="fas fa-box-open" style="font-size: 4rem; color: var(--text-muted);"></i>
                <h3 class="mt-3">No products yet</h3>
                <p class="text-muted">Start adding your products to sell on IndiVibe!</p>
                <a href="{% url 'dashboard:seller_add_product' %}" class="btn btn-primary mt-3">
                    <i class="fas fa-plus"></i> Add Your First Product
                </a>
            </div>
            {% endif %}
        </main>
    </div>
</body>

</html>